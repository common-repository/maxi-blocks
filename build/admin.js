document.addEventListener("DOMContentLoaded",(function(){const e=window.location.href,t=new URL(e).searchParams.get("panel"),o=document.getElementById(t);o&&(o.checked=!0);const n=document.getElementById("maxi-dashboard_main-content_pro");n&&(n.style.display="none");const a=document.getElementById("maxi-dashboard_main-content_not-pro");a&&(a.style.display="block",document.getElementById("maxi-dashboard_main-content_pro-not-pro").style.display="block");const r=document.getElementsByClassName("maxi-dashboard_main-content_accordion-item-input"),i=document.getElementById("maxi-breakpoints");if(r&&i){const e=i?.value,t=JSON.parse(e);Array.from(r)?.forEach((e=>{const o=e.id.replace("maxi-breakpoint-","");e.addEventListener("input",(function(){const n=e.value;t[o]=parseInt(n),i.value=JSON.stringify(t)}))}))}const s=document.getElementById("maxi-versions"),c=document.getElementById("maxi-rollback-version");s?.addEventListener("change",(function(){const{value:e}=s;c.value=e}));const l=document.querySelectorAll(".maxi-dashboard_main-content_accordion-item-content-switcher__dropdown select");l&&Array.from(l).forEach((e=>{const t=document.querySelector(`input#${e.id}`);t.value=e.value,e.addEventListener("change",(function(){t.value=e.value}))}));const d=()=>{const e={lat:-25.344,lng:131.031},t=new google.maps.Map(document.getElementById("maxi-api-test"),{zoom:4,center:e});new google.maps.Marker({position:e,map:t})},m=(e,t,o,n,a="api-validation-loading",r="api-error")=>{const i=t();let s="";const{localization:c}=window;if("validating"===e)s=c.loading_status_message,n.classList.add(a),n.classList.remove(r);else if(n.classList.remove(a),""===i||"EmptyKeyError"===e)o.value="",n.classList.add(r),s=c.please_add_api_key;else switch(n.classList.add(r),e){case"InvalidKeyError":s=c.invalid_api_key;break;case"RefererNotAllowedError":s=c.referer_not_allowed;break;case"InvalidCharactersError":s=c.invalid_characters;break;case"ServerError":s=c.server_error;break;case!0:o.value=i,n.classList.remove(r)}n.innerHTML=s},p=e=>{e&&(e.addEventListener("focus",(()=>{e.type="text"})),e.addEventListener("blur",(()=>{e.type="password"})))},u=document.querySelector(".google-api-key-option-visible-input"),y=document.getElementById("google_api_key_option"),v=document.getElementById("maxi-api-test__validation-message");p(u);const g=document.getElementsByTagName("head")[0],E=()=>u.value,h=e=>{m(e,E,y,v)};u?.addEventListener("input",(function(){(()=>{const e=E();if((e=>!e.match(/^[a-zA-Z0-9_$.[\]]+$/))(e))return void h("InvalidCharactersError");const t=document.getElementById("maxi-test-google-map-script");t&&g.removeChild(t);const o=document.createElement("script");o.src=`https://maps.googleapis.com/maps/api/js?key=${e}&callback=initMap`,o.id="maxi-test-google-map-script",o.defer=!0,o.async=!0,g.appendChild(o),window.initMap=d,v.innerHTML="",v.classList.remove("api-error")})(),(()=>{const{console:e}=window;e&&(t=>{const o=e[t];e[t]=function(){arguments[0]&&(arguments[0].includes("InvalidKeyMapError")||arguments[0].includes("API multiple times")?h("InvalidKeyError"):arguments[0].includes("RefererNotAllowedMapError")?h("RefererNotAllowedError"):arguments[0].includes("API without a key")?h("EmptyKeyError"):h(!0)),o.apply&&o.apply(e,arguments)}})(["error"])})()}));const _=document.querySelector(".openai-api-key-option-visible-input"),f=document.getElementById("openai_api_key_option"),b=document.getElementById("maxi-api-test__validation-message");p(_);const k=()=>_.value,w=e=>{m(e,k,f,b)};function I(e){e.style.height="auto",e.scrollHeight>300?(e.style.height="300px",e.style.overflowY="scroll"):(e.style.height=`${e.scrollHeight}px`,e.style.overflowY="hidden")}_?.addEventListener("input",(()=>{(()=>{const e=k();""!==e?(w("validating"),fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({messages:[{role:"user",content:"Hello"}],model:"gpt-3.5-turbo",max_tokens:1})}).then((e=>{e.ok?w(!0):w("InvalidKeyError")})).catch((e=>{console.error(e),w("ServerError")}))):w("")})()}));const x=document.querySelectorAll("textarea.maxi-dashboard_main-content_accordion-item-input");Array.from(x).forEach((e=>{I(e),e.addEventListener("input",(()=>{I(e)}))})),document.body}));