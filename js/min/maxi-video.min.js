!function(){function e(e){try{if("string"==typeof maxiVideo[0][e])return JSON.parse(maxiVideo[0][e]);if("object"==typeof maxiVideo[0][e]&&null!==maxiVideo[0][e])return maxiVideo[0][e]}catch(e){console.error("Invalid JSON string",e)}return null}function o(e){const o=e.querySelector(".maxi-video-block__popup-wrapper").cloneNode(!0),t=e.id,i=document.getElementById("maxi-popup-slot"),n=()=>{const e=document.createElement("div");return e.id=`popup-${t}`,e.appendChild(o),e};if(i)i.appendChild(n());else{const e=document.createElement("div");e.id="maxi-popup-slot",e.style.zIndex="999999",e.appendChild(n()),document.body.appendChild(e)}return o}function t(e,o,t,i=null){const n=e.querySelector(".maxi-video-block__overlay"),d=o.querySelector(".maxi-video-block__video-player"),r=e=>{e.target.classList.contains("maxi-video-block__video-player")||(o.style.display="none",i?i():d.src="")};document.addEventListener("keydown",(e=>{"flex"===o.style.display&&"Escape"===e.key&&r(e)})),n.addEventListener("click",(()=>{o.style.display="flex",i||(d.src=t)})),o.addEventListener("click",r)}function i(e){return!!document.getElementById(e)}function n(e,o){const t=document.createElement("script");t.src=e,t.id=o,t.defer=!0,document.body.appendChild(t)}window.addEventListener("load",(function(){document.querySelectorAll(".maxi-video-block").forEach((d=>{if(d.classList.contains("maxi-video-block--youtube"))return void(i("maxi-youtube-sdk")||i("maxi-youtube-sdk")||n("https://www.youtube.com/iframe_api","maxi-youtube-sdk"));const r=d?.id,a=e(r);if(!a)return;const{videoType:c,endTime:l,embedUrl:u,playerType:p}=a;"vimeo"===c&&l?i("maxi-vimeo-sdk")||n("https://player.vimeo.com/api/player.js","maxi-vimeo-sdk"):"popup"===p&&t(d,o(d),u)}))})),window.onYouTubeIframeAPIReady=function(){document.querySelectorAll(".maxi-video-block--youtube").forEach((i=>{const n=i.id,d=e(n);if(!d)return;const{playerType:r,embedUrl:a,isLoop:c,startTime:l}=d,u="popup"===r&&o(i),p="popup"===r?u.querySelector("iframe"):i.querySelector("iframe");p.id=`${n}-iframe`,p.src=a;const s=new window.YT.Player(p,{events:{onStateChange:e=>function(e,o,t){const{isLoop:i,startTime:n}=t;e.data===window.YT.PlayerState.ENDED&&i&&o.seekTo(n||0)}(e,s,c)}});"popup"===r&&t(i,u,"",(()=>s.pauseVideo()))}))}}();